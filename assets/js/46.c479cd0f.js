(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{363:function(s,t,a){"use strict";a.r(t);var e=a(7),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"什么是cookie"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是cookie"}},[s._v("#")]),s._v(" 什么是Cookie")]),s._v(" "),t("p",[s._v("Cookie是服务器通知客户端保存键值对的一种技术")]),s._v(" "),t("p",[s._v("Cookie是servlet发送到Web浏览器的少量信息，这些信息由浏览器保存，然后每次请求都发送回服务器")]),s._v(" "),t("p",[s._v("每个Cookie的大小不能超过4kb")]),s._v(" "),t("h2",{attrs:{id:"如何创建cookie"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何创建cookie"}},[s._v("#")]),s._v(" 如何创建Cookie")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1 创建Cookie对象")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cookie")]),s._v(" cookie "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2 通知客户端保存Cookie，可以同时添加多个")]),s._v("\nresponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addCookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cookie"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("div",{staticClass:"center-container"},[t("p",[t("img",{attrs:{src:"https://cdn.staticaly.com/gh/747721653/image-store@master/javaweb/image.67izjinwl0c0.jpg",alt:"image"}})])]),t("h2",{attrs:{id:"服务器如何获取cookie"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务器如何获取cookie"}},[s._v("#")]),s._v(" 服务器如何获取Cookie")]),s._v(" "),t("p",[s._v("服务器获取客户端的Cookie只需要一行代码：")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" cookies "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCookies")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取Cookie的key")]),s._v("\ncookie"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取Cookie的value")]),s._v("\ncookie"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getValue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("div",{staticClass:"center-container"},[t("p",[t("img",{attrs:{src:"https://cdn.staticaly.com/gh/747721653/image-store@master/javaweb/image.3v78rnytwhw0.jpg",alt:"image"}})])]),t("h2",{attrs:{id:"cookie值的修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie值的修改"}},[s._v("#")]),s._v(" Cookie值的修改")]),s._v(" "),t("p",[s._v("方案1：创建同名Cookie对象覆盖之前的Cookie对象")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cookie")]),s._v(" cookie "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"newValue1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nresponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addCookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cookie"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("方案2：先查找到需要修改的Cookie对象，调用"),t("code",[s._v("setValue()")]),s._v("方法赋予新的Cookie值，最后调用"),t("code",[s._v("response.addCookie()")]),s._v("通知客户端保存修改")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cookie")]),s._v(" cookie "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CookieUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("findCookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCookies")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ncookie"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setValue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"newValue2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nresponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addCookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cookie"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("tips:Cookie不支持空格、中文等特殊字符，如果非要使用，需要base64编码")]),s._v(" "),t("h2",{attrs:{id:"cookie生命控制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie生命控制"}},[s._v("#")]),s._v(" Cookie生命控制")]),s._v(" "),t("p",[s._v("管理Cookie什么时候被销毁（删除）")]),s._v(" "),t("p",[s._v("主要方法："),t("code",[s._v("setMaxAge()")]),s._v("，默认值为-1，即Session级别")]),s._v(" "),t("p",[s._v("正数表示在指定的秒数后过期")]),s._v(" "),t("p",[s._v("负数表示浏览器关闭删除Cookie")]),s._v(" "),t("p",[s._v("0表示马上删除Cookie")]),s._v(" "),t("h2",{attrs:{id:"cookie有效路径path的设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie有效路径path的设置"}},[s._v("#")]),s._v(" Cookie有效路径path的设置")]),s._v(" "),t("p",[s._v("Cookie的path属性可以有效地过滤哪些Cookie可以发送给服务器，哪些不发。path属性是通过请求的地址来进行有效的过滤。")]),s._v(" "),t("p",[s._v("例：")]),s._v(" "),t("p",[s._v("CookieA：path=/工程路径")]),s._v(" "),t("p",[s._v("CookieB：path=/工程路径/abc")]),s._v(" "),t("p",[s._v("请求地址http://ip:port/工程路径/a.html")]),s._v(" "),t("p",[s._v("这个时候CookieA会发送，CookieB不发送")]),s._v(" "),t("p",[s._v("请求地址http://ip:port/工程路径/abc/a.html")]),s._v(" "),t("p",[s._v("这个时候CookieA发送，CookieB也发送")]),s._v(" "),t("h2",{attrs:{id:"实际使用-免输入用户名登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实际使用-免输入用户名登录"}},[s._v("#")]),s._v(" 实际使用：免输入用户名登录")]),s._v(" "),t("div",{staticClass:"center-container"},[t("p",[t("img",{attrs:{src:"https://cdn.staticaly.com/gh/747721653/image-store@master/javaweb/image.57b10wjd0dg0.jpg",alt:"image"}})])])])}),[],!1,null,null,null);t.default=n.exports}}]);