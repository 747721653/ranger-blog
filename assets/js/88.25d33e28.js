(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{405:function(v,_,e){"use strict";e.r(_);var t=e(8),r=Object(t.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h2",{attrs:{id:"_1-全面接管springmvc"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-全面接管springmvc"}},[v._v("#")]),v._v(" 1. 全面接管SpringMVC")]),v._v(" "),_("ul",[_("li",[_("p",[v._v("SpringBoot 默认配置好了 SpringMVC 的所有常用特性。")])]),v._v(" "),_("li",[_("p",[v._v("如果我们需要全面接管SpringMVC的所有配置并"),_("strong",[v._v("禁用默认配置")]),v._v("，仅需要编写一个"),_("code",[v._v("WebMvcConfigurer")]),v._v("配置类，并标注 "),_("code",[v._v("@EnableWebMvc")]),v._v(" 即可")])]),v._v(" "),_("li",[_("p",[v._v("全手动模式")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("@EnableWebMvc")]),v._v(" : 禁用默认配置")])]),v._v(" "),_("ul",[_("li",[_("code",[v._v("WebMvcConfigurer")]),v._v("组件：定义MVC的底层行为")])])])]),v._v(" "),_("h3",{attrs:{id:"_1-webmvcautoconfiguration-到底自动配置了哪些规则"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-webmvcautoconfiguration-到底自动配置了哪些规则"}},[v._v("#")]),v._v(" 1. WebMvcAutoConfiguration 到底自动配置了哪些规则")]),v._v(" "),_("p",[v._v("SpringMVC自动配置场景给我们配置了如下所有"),_("strong",[v._v("默认行为")])]),v._v(" "),_("ol",[_("li",[_("p",[_("code",[v._v("WebMvcAutoConfiguration")]),v._v("web场景的自动配置类")]),v._v(" "),_("ol",[_("li",[_("p",[v._v("支持RESTful的filter：HiddenHttpMethodFilter")])]),v._v(" "),_("li",[_("p",[v._v("支持非POST请求，请求体携带数据：FormContentFilter")])]),v._v(" "),_("li",[_("p",[v._v("导入"),_("code",[v._v("EnableWebMvcConfiguration")]),v._v("：")]),v._v(" "),_("ol",[_("li",[_("code",[v._v("RequestMappingHandlerAdapter")])]),v._v(" "),_("li",[_("code",[v._v("WelcomePageHandlerMapping")]),v._v("： "),_("strong",[v._v("欢迎页功能")]),v._v("支持（模板引擎目录、静态资源目录放index.html），项目访问/ 就默认展示这个页面.")]),v._v(" "),_("li",[_("code",[v._v("RequestMappingHandlerMapping")]),v._v("：找每个请求由谁处理的映射关系")]),v._v(" "),_("li",[_("code",[v._v("ExceptionHandlerExceptionResolver")]),v._v("：默认的异常解析器")]),v._v(" "),_("li",[_("code",[v._v("LocaleResolver")]),v._v("：国际化解析器")]),v._v(" "),_("li",[_("code",[v._v("ThemeResolver")]),v._v("：主题解析器")]),v._v(" "),_("li",[_("code",[v._v("FlashMapManager")]),v._v("：临时数据共享")]),v._v(" "),_("li",[_("code",[v._v("FormattingConversionService")]),v._v("： 数据格式化 、类型转化")]),v._v(" "),_("li",[_("code",[v._v("Validator")]),v._v("： 数据校验"),_("code",[v._v("JSR303")]),v._v("提供的数据校验功能")]),v._v(" "),_("li",[_("code",[v._v("WebBindingInitializer")]),v._v("：请求参数的封装与绑定")]),v._v(" "),_("li",[_("code",[v._v("ContentNegotiationManager")]),v._v("：内容协商管理器")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("WebMvcAutoConfigurationAdapter")]),v._v("配置生效，它是一个"),_("code",[v._v("WebMvcConfigurer")]),v._v("，定义mvc底层组件")]),v._v(" "),_("ol",[_("li",[_("p",[v._v("定义好 "),_("code",[v._v("WebMvcConfigurer")]),v._v(" "),_("strong",[v._v("底层组件默认功能；所有功能详见列表")])])]),v._v(" "),_("li",[_("p",[v._v("视图解析器："),_("code",[v._v("InternalResourceViewResolver")])])]),v._v(" "),_("li",[_("p",[v._v("视图解析器："),_("code",[v._v("BeanNameViewResolver")]),v._v(",**视图名（controller方法的返回值字符串）**就是组件名")])]),v._v(" "),_("li",[_("p",[v._v("内容协商解析器："),_("code",[v._v("ContentNegotiatingViewResolver")])])]),v._v(" "),_("li",[_("p",[v._v("请求上下文过滤器："),_("code",[v._v("RequestContextFilter")]),v._v(": 任意位置直接获取当前请求")])]),v._v(" "),_("li",[_("p",[v._v("静态资源链规则")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("ProblemDetailsExceptionHandler")]),v._v("：错误详情")]),v._v(" "),_("ol",[_("li",[v._v("SpringMVC内部场景异常被它捕获：")])])])])]),v._v(" "),_("li",[_("p",[v._v("定义了MVC默认的底层行为: "),_("code",[v._v("WebMvcConfigurer")])])])])])]),v._v(" "),_("h3",{attrs:{id:"_2-enablewebmvc-禁用默认行为"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-enablewebmvc-禁用默认行为"}},[v._v("#")]),v._v(" 2. @EnableWebMvc 禁用默认行为")]),v._v(" "),_("ol",[_("li",[_("code",[v._v("@EnableWebMvc")]),v._v("给容器中导入 "),_("code",[v._v("DelegatingWebMvcConfiguration")]),v._v("组件，")])]),v._v(" "),_("p",[v._v("​        他是 "),_("code",[v._v("WebMvcConfigurationSupport")])]),v._v(" "),_("ol",[_("li",[_("code",[v._v("WebMvcAutoConfiguration")]),v._v("有一个核心的条件注解, "),_("code",[v._v("@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)")]),v._v("，容器中没有"),_("code",[v._v("WebMvcConfigurationSupport")]),v._v("，"),_("code",[v._v("WebMvcAutoConfiguration")]),v._v("才生效.")]),v._v(" "),_("li",[v._v("@EnableWebMvc 导入 "),_("code",[v._v("WebMvcConfigurationSupport")]),v._v(" 导致 "),_("code",[v._v("WebMvcAutoConfiguration")]),v._v(" 失效。导致禁用了默认行为")])]),v._v(" "),_("ul",[_("li",[v._v("@EnableWebMVC 禁用了 Mvc的自动配置")]),v._v(" "),_("li",[v._v("WebMvcConfigurer 定义SpringMVC底层组件的功能类")])]),v._v(" "),_("h3",{attrs:{id:"_2-webmvcconfigurer-功能"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-webmvcconfigurer-功能"}},[v._v("#")]),v._v(" 2. WebMvcConfigurer 功能")]),v._v(" "),_("p",[v._v("定义扩展SpringMVC底层功能")]),v._v(" "),_("table",[_("thead",[_("tr",[_("th",[v._v("提供方法")]),v._v(" "),_("th",[v._v("核心参数")]),v._v(" "),_("th",[v._v("功能")]),v._v(" "),_("th",[v._v("默认")])])]),v._v(" "),_("tbody",[_("tr",[_("td",[v._v("addFormatters")]),v._v(" "),_("td",[v._v("FormatterRegistry")]),v._v(" "),_("td",[_("strong",[v._v("格式化器")]),v._v("：支持属性上@NumberFormat和@DatetimeFormat的数据类型转换")]),v._v(" "),_("td",[v._v("GenericConversionService")])]),v._v(" "),_("tr",[_("td",[v._v("getValidator")]),v._v(" "),_("td",[v._v("无")]),v._v(" "),_("td",[_("strong",[v._v("数据校验")]),v._v("：校验 Controller 上使用@Valid标注的参数合法性。需要导入starter-validator")]),v._v(" "),_("td",[v._v("无")])]),v._v(" "),_("tr",[_("td",[v._v("addInterceptors")]),v._v(" "),_("td",[v._v("InterceptorRegistry")]),v._v(" "),_("td",[_("strong",[v._v("拦截器")]),v._v("：拦截收到的所有请求")]),v._v(" "),_("td",[v._v("无")])]),v._v(" "),_("tr",[_("td",[v._v("configureContentNegotiation")]),v._v(" "),_("td",[v._v("ContentNegotiationConfigurer")]),v._v(" "),_("td",[_("strong",[v._v("内容协商")]),v._v("：支持多种数据格式返回。需要配合支持这种类型的HttpMessageConverter")]),v._v(" "),_("td",[v._v("支持 json")])]),v._v(" "),_("tr",[_("td",[v._v("configureMessageConverters")]),v._v(" "),_("td",[v._v("List<HttpMessageConverter<?>>")]),v._v(" "),_("td",[_("strong",[v._v("消息转换器")]),v._v("：标注@ResponseBody的返回值会利用MessageConverter直接写出去")]),v._v(" "),_("td",[v._v("8 个，支持byte，string,multipart,resource，json")])]),v._v(" "),_("tr",[_("td",[v._v("addViewControllers")]),v._v(" "),_("td",[v._v("ViewControllerRegistry")]),v._v(" "),_("td",[_("strong",[v._v("视图映射")]),v._v("：直接将请求路径与物理视图映射。用于无 java 业务逻辑的直接视图页渲染")]),v._v(" "),_("td",[v._v("无 "),_("a",{attrs:{href:"mvc:view-controller"}},[v._v("mvc:view-controller")])])]),v._v(" "),_("tr",[_("td",[v._v("configureViewResolvers")]),v._v(" "),_("td",[v._v("ViewResolverRegistry")]),v._v(" "),_("td",[_("strong",[v._v("视图解析器")]),v._v("：逻辑视图转为物理视图")]),v._v(" "),_("td",[v._v("ViewResolverComposite")])]),v._v(" "),_("tr",[_("td",[v._v("addResourceHandlers")]),v._v(" "),_("td",[v._v("ResourceHandlerRegistry")]),v._v(" "),_("td",[_("strong",[v._v("静态资源处理")]),v._v("：静态资源路径映射、缓存控制")]),v._v(" "),_("td",[v._v("ResourceHandlerRegistry")])]),v._v(" "),_("tr",[_("td",[v._v("configureDefaultServletHandling")]),v._v(" "),_("td",[v._v("DefaultServletHandlerConfigurer")]),v._v(" "),_("td",[_("strong",[v._v("默认 Servlet")]),v._v("：可以覆盖 Tomcat 的DefaultServlet。让DispatcherServlet拦截/")]),v._v(" "),_("td",[v._v("无")])]),v._v(" "),_("tr",[_("td",[v._v("configurePathMatch")]),v._v(" "),_("td",[v._v("PathMatchConfigurer")]),v._v(" "),_("td",[_("strong",[v._v("路径匹配")]),v._v("：自定义 URL 路径匹配。可以自动为所有路径加上指定前缀，比如 /api")]),v._v(" "),_("td",[v._v("无")])]),v._v(" "),_("tr",[_("td",[v._v("configureAsyncSupport")]),v._v(" "),_("td",[v._v("AsyncSupportConfigurer")]),v._v(" "),_("td",[_("strong",[v._v("异步支持")]),v._v("：")]),v._v(" "),_("td",[v._v("TaskExecutionAutoConfiguration")])]),v._v(" "),_("tr",[_("td",[v._v("addCorsMappings")]),v._v(" "),_("td",[v._v("CorsRegistry")]),v._v(" "),_("td",[_("strong",[v._v("跨域")]),v._v("：")]),v._v(" "),_("td",[v._v("无")])]),v._v(" "),_("tr",[_("td",[v._v("addArgumentResolvers")]),v._v(" "),_("td",[v._v("List<HandlerMethodArgumentResolver>")]),v._v(" "),_("td",[_("strong",[v._v("参数解析器")]),v._v("：")]),v._v(" "),_("td",[v._v("mvc 默认提供")])]),v._v(" "),_("tr",[_("td",[v._v("addReturnValueHandlers")]),v._v(" "),_("td",[v._v("List<HandlerMethodReturnValueHandler>")]),v._v(" "),_("td",[_("strong",[v._v("返回值解析器")]),v._v("：")]),v._v(" "),_("td",[v._v("mvc 默认提供")])]),v._v(" "),_("tr",[_("td",[v._v("configureHandlerExceptionResolvers")]),v._v(" "),_("td",[v._v("List<HandlerExceptionResolver>")]),v._v(" "),_("td",[_("strong",[v._v("异常处理器")]),v._v("：")]),v._v(" "),_("td",[v._v("默认 3 个 ExceptionHandlerExceptionResolver ResponseStatusExceptionResolver DefaultHandlerExceptionResolver")])]),v._v(" "),_("tr",[_("td",[v._v("getMessageCodesResolver")]),v._v(" "),_("td",[v._v("无")]),v._v(" "),_("td",[_("strong",[v._v("消息码解析器")]),v._v("：国际化使用")]),v._v(" "),_("td",[v._v("无")])])])]),v._v(" "),_("h2",{attrs:{id:"_2-最佳实践"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-最佳实践"}},[v._v("#")]),v._v(" 2. 最佳实践")]),v._v(" "),_("p",[v._v("SpringBoot 已经默认配置好了"),_("strong",[v._v("Web开发")]),v._v("场景常用功能。我们直接使用即可。")]),v._v(" "),_("h3",{attrs:{id:"三种方式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#三种方式"}},[v._v("#")]),v._v(" 三种方式")]),v._v(" "),_("table",[_("thead",[_("tr",[_("th",[v._v("方式")]),v._v(" "),_("th",[v._v("用法")]),v._v(" "),_("th",[v._v("效果")]),v._v(" "),_("th")])]),v._v(" "),_("tbody",[_("tr",[_("td",[_("strong",[v._v("全自动")])]),v._v(" "),_("td",[v._v("直接编写控制器逻辑")]),v._v(" "),_("td"),v._v(" "),_("td",[v._v("全部使用"),_("strong",[v._v("自动配置默认效果")])])]),v._v(" "),_("tr",[_("td",[_("strong",[v._v("手自一体")])]),v._v(" "),_("td",[_("code",[v._v("@Configuration")]),v._v(" +   配置"),_("code",[v._v("WebMvcConfigurer")]),v._v("+ "),_("em",[v._v("配置 WebMvcRegistrations")])]),v._v(" "),_("td",[_("strong",[v._v("不要标注")]),v._v(" "),_("code",[v._v("@EnableWebMvc")])]),v._v(" "),_("td",[_("strong",[v._v("保留自动配置效果")]),v._v(" "),_("strong",[v._v("手动设置部分功能")]),v._v(" 定义MVC底层组件")])]),v._v(" "),_("tr",[_("td",[_("strong",[v._v("全手动")])]),v._v(" "),_("td",[_("code",[v._v("@Configuration")]),v._v(" +   配置"),_("code",[v._v("WebMvcConfigurer")])]),v._v(" "),_("td",[_("strong",[v._v("标注")]),v._v(" "),_("code",[v._v("@EnableWebMvc")])]),v._v(" "),_("td",[_("strong",[v._v("禁用自动配置效果")]),v._v(" "),_("strong",[v._v("全手动设置")])])])])]),v._v(" "),_("p",[v._v("总结：")]),v._v(" "),_("p",[_("strong",[v._v("给容器中写一个配置类")]),_("code",[v._v("@Configuration")]),_("strong",[v._v("实现")]),v._v(" "),_("code",[v._v("WebMvcConfigurer")]),_("strong",[v._v("但是不要标注")]),v._v(" "),_("code",[v._v("@EnableWebMvc")]),_("strong",[v._v("注解，实现手自一体的效果。")])]),v._v(" "),_("h3",{attrs:{id:"两种模式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#两种模式"}},[v._v("#")]),v._v(" 两种模式")]),v._v(" "),_("p",[v._v("1、"),_("code",[v._v("前后分离模式")]),v._v("： "),_("code",[v._v("@RestController")]),v._v("响应JSON数据")]),v._v(" "),_("p",[v._v("2、"),_("code",[v._v("前后不分离模式")]),v._v("：@Controller + Thymeleaf模板引擎")])])}),[],!1,null,null,null);_.default=r.exports}}]);